# 현재 오류가 있는 페이지 및 문제점 분석

## 발견된 주요 오류들

### 1. 신청 페이지 (Campaign Application) - 심각한 오류
**URL**: `/campaign-application?campaign_id=xxx`

#### 콘솔 오류
```
error: Failed to load resource: the server responded with a status of 406 ()
```

#### 문제점 분석
- **HTTP 406 오류**: "Not Acceptable" 응답으로, 서버가 요청을 처리할 수 없음을 의미
- **기존 신청서 조회 실패**: `log: 기존 신청서: null` - 사용자의 기존 신청 내역을 불러오지 못함
- **API 호출 실패**: 신청 관련 API 호출이 실패하고 있음

#### 예상 원인
1. **테이블 불일치**: 코드에서는 `applications` 테이블을 사용하지만, 실제로는 `campaign_applications` 테이블을 사용해야 할 가능성
2. **RLS 정책 문제**: Row Level Security 정책으로 인한 권한 부족
3. **API 엔드포인트 불일치**: 실제 데이터베이스 구조와 API 코드 간의 불일치

### 2. 통계 데이터 불일치
**위치**: 홈페이지 통계 섹션

#### 문제점
- **총 응모수**: 항상 `0`으로 표시됨
- **실제 로그**: `Applications 데이터 로드 성공: 0 개`

#### 예상 원인
- `applications` 테이블이 비어있거나 접근 권한이 없음
- 실제 신청 데이터는 `campaign_applications` 테이블에 있을 가능성

### 3. 언어 혼재 문제
**위치**: 신청 폼

#### 문제점
- 일본어와 한국어가 혼재되어 있음
- 플레이스홀더 텍스트: "답변을 입력하세요" (한국어)
- 레이블: "肌タイプはどうですか？" (일본어)

## API 코드와 실제 DB 구조 간 불일치로 인한 문제들

### 1. 신청 시스템 이중화 문제
- **코드**: `applications` 테이블 사용
- **실제 DB**: `campaign_applications` 테이블이 더 완전한 구조
- **결과**: 신청 기능이 제대로 작동하지 않음

### 2. 누락된 필드들
**user_profiles 테이블**에서 실제 DB에는 있지만 API에서 처리하지 못하는 필드들:
- `weight`, `height` (체중, 키)
- `has_children`, `is_married` (자녀 유무, 결혼 여부)
- `points` (포인트)
- `approval_status` (승인 상태)

### 3. 포인트 시스템 미구현
실제 DB에는 포인트 관련 테이블들이 있지만 API가 없음:
- `user_points`
- `point_requests`
- `point_transactions`

## 우선 수정이 필요한 항목들

### 1. 즉시 수정 필요 (Critical)
1. **신청 시스템 수정**
   - `campaign_applications` 테이블을 사용하도록 API 수정
   - HTTP 406 오류 해결
   
2. **RLS 정책 검토**
   - 신청 관련 테이블의 권한 정책 확인 및 수정

### 2. 단기 수정 필요 (High Priority)
1. **통계 데이터 수정**
   - 올바른 테이블에서 데이터 조회하도록 수정
   
2. **언어 일관성**
   - 일본어로 통일하거나 다국어 지원 구현

### 3. 중장기 수정 필요 (Medium Priority)
1. **포인트 시스템 구현**
   - 포인트 관련 API 추가
   
2. **사용자 프로필 확장**
   - 누락된 필드들에 대한 API 추가

## 권장 수정 순서

1. **1단계**: 신청 시스템 수정 (가장 중요한 기능)
2. **2단계**: 통계 데이터 수정 (사용자 경험 개선)
3. **3단계**: 포인트 시스템 구현 (기능 완성도 향상)
4. **4단계**: 기타 누락된 기능들 추가

현재 가장 심각한 문제는 **신청 기능이 작동하지 않는 것**이므로, 이를 우선적으로 해결해야 합니다.
